{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/discount.service\";\nimport * as i2 from \"src/app/service/users.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"primeng/inputtext\";\nimport * as i6 from \"../../layouts/shared/vr-input/vr-input.component\";\nimport * as i7 from \"../../layouts/shared/vr-alert/vr-alert.component\";\nfunction DiscountAddComponent_app_vr_alert_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-vr-alert\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"color\", ctx_r0.alertColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.alertMsg, \"\\n\");\n  }\n}\nexport class DiscountAddComponent {\n  // constructor and lifecycle methods\n  constructor(discount, users) {\n    this.discount = discount;\n    this.users = users;\n    // variables\n    this.showAlert = false;\n    this.alertMsg = 'Please wait';\n    this.alertColor = 'primary';\n    // validators & formcontrols\n    this.discount_code = new FormControl('', [Validators.required, Validators.minLength(1)]);\n    this.title = new FormControl('', [Validators.required, Validators.minLength(3)]);\n    this.description = new FormControl('', [Validators.required, Validators.minLength(3)]);\n    this.start_date = new FormControl('', [Validators.required, Validators.minLength(3)]);\n    this.end_date = new FormControl('', [Validators.required, Validators.minLength(3)]);\n    this.discount_percent = new FormControl('', [Validators.required, Validators.minLength(1)]);\n    this.max_discount_amount = new FormControl('', [Validators.required, Validators.minLength(1)]);\n    this.max_no_of_users = new FormControl('', [Validators.required, Validators.minLength(1)]);\n    // Grouped Form\n    this.addDiscount = new FormGroup({\n      discount_code: this.discount_code,\n      title: this.title,\n      description: this.description,\n      start_date: this.start_date,\n      end_date: this.end_date,\n      discount_percent: this.discount_percent,\n      max_discount_amount: this.max_discount_amount,\n      max_no_of_users: this.max_no_of_users\n    });\n  }\n  ngOnInit() {\n    const userDetails = this.users.getStoredUserDetails();\n    this.userDetails = userDetails;\n    this.addAccessTrail();\n  }\n  addAccessTrail() {\n    const {\n      email\n    } = this.userDetails;\n    console.log(email);\n    const userCredetials = {\n      login: email,\n      action: 'Viewed Discount Add'\n    };\n    this.users.addAccesstrail(userCredetials).subscribe(res => {\n      const {\n        message\n      } = res;\n      if (message === \"Success insering access\") {} else {}\n    });\n  }\n  //  functions \n  onSubmit() {\n    this.showAlert = true;\n    setTimeout(() => {\n      this.showAlert = true;\n      this.alertMsg = 'Loading... If sync persists check network';\n      this.alertColor = 'info';\n      const discountData = this.addDiscount.value;\n      console.log(discountData);\n      this.discount.addDiscount(discountData).subscribe(res => {\n        console.log(res);\n        if (res.code == 200) {\n          this.alertMsg = 'Discount added';\n          this.alertColor = \"success\";\n        } else {\n          this.alertMsg = 'something went wrong check connectivity and try again';\n          this.alertColor = 'danger';\n        }\n      });\n    }, 1600);\n  }\n  reset() {\n    this.addDiscount.reset();\n  }\n  static #_ = this.ɵfac = function DiscountAddComponent_Factory(t) {\n    return new (t || DiscountAddComponent)(i0.ɵɵdirectiveInject(i1.DiscountService), i0.ɵɵdirectiveInject(i2.UsersService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DiscountAddComponent,\n    selectors: [[\"app-discount-add\"]],\n    decls: 67,\n    vars: 10,\n    consts: [[3, \"color\", 4, \"ngIf\"], [1, \"main-container\"], [1, \"header\"], [1, \"add-admin-form\"], [1, \"card\"], [1, \"card-title\"], [1, \"card-body\"], [3, \"formGroup\"], [1, \"container\"], [1, \"card-input\"], [1, \"form-group\"], [\"htmlFor\", \"fistname\"], [\"pInputText\", \"\", \"type\", \"text\", \"placeholder\", \"Discount Code\", 3, \"control\"], [\"htmlFor\", \"lastname\"], [\"pInputText\", \"\", \"type\", \"text\", \"placeholder\", \"Title\", 3, \"control\"], [\"htmlFor\", \"email\"], [\"pInputText\", \"\", \"type\", \"text\", \"placeholder\", \"Description\", 3, \"control\"], [\"htmlFor\", \"phone\"], [\"pInputText\", \"\", \"pKeyFilter\", \"int\", \"placeholder\", \"Discount Percent\", 3, \"control\"], [\"pInputText\", \"\", \"pKeyFilter\", \"int\", \"placeholder\", \" Start Date\", 3, \"control\"], [\"pInputText\", \"\", \"pKeyFilter\", \"int\", \"placeholder\", \" End Date\", 3, \"control\"], [\"htmlFor\", \"max_discount_amount\"], [\"pInputText\", \"\", \"pKeyFilter\", \"int\", \"placeholder\", \"Max Discount Amount \", 3, \"control\"], [\"htmlFor\", \"max_no_of_users\"], [\"pInputText\", \"\", \"pKeyFilter\", \"int\", \"placeholder\", \"Max Number of Users\", 3, \"control\"], [\"type\", \"submit\", \"label\", \"submit\", 1, \"button\", \"btn-primary\", 3, \"click\"], [\"type\", \"submit\", \"label\", \"submit\", 1, \"button\", \"btn-secondary\", 3, \"click\"], [1, \"footer\"], [3, \"color\"]],\n    template: function DiscountAddComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, DiscountAddComponent_app_vr_alert_0_Template, 2, 2, \"app-vr-alert\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h5\");\n        i0.ɵɵtext(7, \"Add Discount\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"form\", 7)(10, \"div\", 8)(11, \"div\", 9)(12, \"div\", 10)(13, \"div\")(14, \"label\", 11);\n        i0.ɵɵtext(15, \"Discount code*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(16, \"app-vr-input\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\", 9)(18, \"div\", 10)(19, \"div\")(20, \"label\", 13);\n        i0.ɵɵtext(21, \"Title*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(22, \"app-vr-input\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"div\", 8)(24, \"div\", 9)(25, \"div\", 10)(26, \"div\")(27, \"label\", 15);\n        i0.ɵɵtext(28, \"Description*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(29, \"app-vr-input\", 16);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(30, \"div\", 9)(31, \"div\", 10)(32, \"div\")(33, \"label\", 17);\n        i0.ɵɵtext(34, \"Discount Percent*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(35, \"app-vr-input\", 18);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(36, \"div\", 8)(37, \"div\", 9)(38, \"div\", 10)(39, \"div\")(40, \"label\", 17);\n        i0.ɵɵtext(41, \"Start date*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(42, \"app-vr-input\", 19);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(43, \"div\", 9)(44, \"div\", 10)(45, \"div\")(46, \"label\", 17);\n        i0.ɵɵtext(47, \"End date*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(48, \"app-vr-input\", 20);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(49, \"div\", 8)(50, \"div\", 9)(51, \"div\", 10)(52, \"div\")(53, \"label\", 21);\n        i0.ɵɵtext(54, \"Max Discount Amount*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(55, \"app-vr-input\", 22);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(56, \"div\", 9)(57, \"div\", 10)(58, \"div\")(59, \"label\", 23);\n        i0.ɵɵtext(60, \"Max Number of Users*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(61, \"app-vr-input\", 24);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(62, \"button\", 25);\n        i0.ɵɵlistener(\"click\", function DiscountAddComponent_Template_button_click_62_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(63, \" Add \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"button\", 26);\n        i0.ɵɵlistener(\"click\", function DiscountAddComponent_Template_button_click_64_listener() {\n          return ctx.reset();\n        });\n        i0.ɵɵtext(65, \" Cancel \");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelement(66, \"div\", 27);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.showAlert);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"formGroup\", ctx.addDiscount);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"control\", ctx.discount_code);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"control\", ctx.title);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"control\", ctx.description);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"control\", ctx.discount_percent);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"control\", ctx.start_date);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"control\", ctx.end_date);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"control\", ctx.max_discount_amount);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"control\", ctx.max_no_of_users);\n      }\n    },\n    dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.FormGroupDirective, i5.InputText, i6.VRInputComponent, i7.VrAlertComponent],\n    styles: [\".main-container[_ngcontent-%COMP%] {\\n  height: 100vh;\\n  width: 100%;\\n}\\n\\n.header[_ngcontent-%COMP%] {\\n  height: 30%;\\n  background: rgb(2, 0, 36);\\n  background: linear-gradient(90deg, rgb(2, 0, 36) 0%, rgba(9, 9, 121, 0.6755077031) 35%, rgb(0, 212, 255) 100%);\\n}\\n\\n.footer[_ngcontent-%COMP%] {\\n  height: 70%;\\n  background-color: #F3F5FB;\\n}\\n\\n.add-admin-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  width: 100%;\\n  height: 100vh;\\n  background-color: transparent;\\n  position: absolute;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  width: 90%;\\n  height: 90%;\\n  padding: 40px;\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  display: flex;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.card-input[_ngcontent-%COMP%] {\\n  width: 50%;\\n  height: 16vh;\\n}\\n\\nlabel[_ngcontent-%COMP%] {\\n  color: rgb(199, 197, 197);\\n  font-weight: 600;\\n}\\n\\ninput[_ngcontent-%COMP%] {\\n  width: 95%;\\n  padding: 10px 10px;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n  width: 50%;\\n  height: 100%;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  padding: 10px;\\n  width: 10%;\\n  border-radius: 10px;\\n  margin: 10px;\\n  background-color: #219cdb;\\n  color: white;\\n  font-weight: 600;\\n  border-color: transparent;\\n}\\n\\n.button[_ngcontent-%COMP%] {\\n  padding: 10px;\\n  width: 12%;\\n  border-radius: 10px;\\n  margin: 10px;\\n  background-color: #525252;\\n  color: white;\\n  font-weight: 600;\\n  border-color: transparent;\\n}\\n\\n.dropdown[_ngcontent-%COMP%] {\\n  width: 95%;\\n  height: 100%;\\n}\\n\\nlabel[_ngcontent-%COMP%] {\\n  color: rgb(4, 4, 51);\\n}\\n\\nselect[_ngcontent-%COMP%] {\\n  width: 95%;\\n  padding: 8.5px;\\n  border-radius: 6px;\\n  border: 1px solid #d6d6d6;\\n  color: #797676;\\n}\\n\\nselect[_ngcontent-%COMP%]:hover {\\n  color: rgb(20, 20, 20);\\n}\\n\\nselect.selected[_ngcontent-%COMP%] {\\n  border: 1px solid #d6d6d6 !important;\\n}\\n\\n.admin_role[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvZGlzY291bnQtYWRkL2Rpc2NvdW50LWFkZC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGFBQUE7RUFDQSxXQUFBO0FBQ0o7O0FBQ0E7RUFDSSxXQUFBO0VBQ0EseUJBQUE7RUFDQSw4R0FBQTtBQUVKOztBQUNBO0VBQ0ksV0FBQTtFQUNBLHlCQUFBO0FBRUo7O0FBQ0E7RUFDSSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0VBQ0EsNkJBQUE7RUFDQSxrQkFBQTtBQUVKOztBQUNBO0VBQ0ksVUFBQTtFQUNBLFdBQUE7RUFDQSxhQUFBO0FBRUo7O0FBQ0E7RUFDSSxhQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUFFSjs7QUFDQTtFQUNJLFVBQUE7RUFDQSxZQUFBO0FBRUo7O0FBR0E7RUFDSSx5QkFBQTtFQUNBLGdCQUFBO0FBQUo7O0FBRUE7RUFDSSxVQUFBO0VBRUEsa0JBQUE7QUFBSjs7QUFHQTtFQUNHLFVBQUE7RUFDQSxZQUFBO0FBQUg7O0FBRUE7RUFDSSxhQUFBO0VBQ0EsVUFBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLHlCQUFBO0VBQ0EsWUFBQTtFQUNBLGdCQUFBO0VBQ0EseUJBQUE7QUFDSjs7QUFDQTtFQUNJLGFBQUE7RUFDQSxVQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0VBQ0EseUJBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSx5QkFBQTtBQUVKOztBQUNBO0VBQ0ksVUFBQTtFQUNBLFlBQUE7QUFFSjs7QUFFQTtFQUNJLG9CQUFBO0FBQ0o7O0FBRUE7RUFDSSxVQUFBO0VBQ0EsY0FBQTtFQUNBLGtCQUFBO0VBQ0EseUJBQUE7RUFDQSxjQUFBO0FBQ0o7O0FBRUE7RUFDSSxzQkFBQTtBQUNKOztBQUVBO0VBQ0ksb0NBQUE7QUFDSjs7QUFFQTtFQUNJLGVBQUE7QUFDSiIsInNvdXJjZXNDb250ZW50IjpbIi5tYWluLWNvbnRhaW5lciB7XG4gICAgaGVpZ2h0OiAxMDB2aDtcbiAgICB3aWR0aDogMTAwJTtcbn1cbi5oZWFkZXIge1xuICAgIGhlaWdodDogMzAlO1xuICAgIGJhY2tncm91bmQ6IHJnYigyLDAsMzYpO1xuICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCg5MGRlZywgcmdiYSgyLDAsMzYsMSkgMCUsIHJnYmEoOSw5LDEyMSwwLjY3NTUwNzcwMzA4MTIzMjQpIDM1JSwgcmdiYSgwLDIxMiwyNTUsMSkgMTAwJSk7XG59XG5cbi5mb290ZXIge1xuICAgIGhlaWdodDogNzAlO1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNGM0Y1RkI7XG59XG5cbi5hZGQtYWRtaW4tZm9ybSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwdmg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xufVxuXG4uY2FyZCB7XG4gICAgd2lkdGg6IDkwJTtcbiAgICBoZWlnaHQ6IDkwJTtcbiAgICBwYWRkaW5nOiA0MHB4O1xufVxuXG4uY29udGFpbmVyIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogMTAwJTtcbiAgICAvLyBiYWNrZ3JvdW5kLWNvbG9yOiBvcmFuZ2U7XG59XG4uY2FyZC1pbnB1dCB7XG4gICAgd2lkdGg6IDUwJTtcbiAgICBoZWlnaHQ6IDE2dmg7XG59XG4uZm9ybS1ncm91cCB7XG4gICAgLy8gYmFja2dyb3VuZC1jb2xvcjogIzIxOWNkYjtcbn1cbmxhYmVsIHtcbiAgICBjb2xvcjogcmdiKDE5OSwgMTk3LCAxOTcpO1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG59XG5pbnB1dCB7XG4gICAgd2lkdGg6IDk1JTtcbiAgICAvLyBoZWlnaHQ6IDMwcHg7XG4gICAgcGFkZGluZzogMTBweCAxMHB4O1xuXG59XG4uYnRuIHtcbiAgIHdpZHRoOiA1MCU7XG4gICBoZWlnaHQ6IDEwMCU7XG59XG5idXR0b24ge1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgd2lkdGg6IDEwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgIG1hcmdpbjogMTBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE5Y2RiO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG4uYnV0dG9uIHtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIHdpZHRoOiAxMiU7XG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICBtYXJnaW46IDEwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzUyNTI1MjtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1xufVxuXG4uZHJvcGRvd24ge1xuICAgIHdpZHRoOiA5NSU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIC8vIHBhZGRpbmc6IDEwcHg7XG59XG5cbmxhYmVsIHtcbiAgICBjb2xvcjogcmdiKDQsIDQsIDUxKTtcbn1cblxuc2VsZWN0IHtcbiAgICB3aWR0aDogOTUlO1xuICAgIHBhZGRpbmc6IDguNXB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZDZkNmQ2O1xuICAgIGNvbG9yOiAjNzk3Njc2O1xufVxuXG5zZWxlY3Q6aG92ZXIge1xuICAgIGNvbG9yOiByZ2IoMjAsIDIwLCAyMCk7XG59XG5cbnNlbGVjdC5zZWxlY3RlZCB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2Q2ZDZkNiAhaW1wb3J0YW50O1xufVxuXG4uYWRtaW5fcm9sZSBsaSB7XG4gICAgZm9udC1zaXplOiAxMnB4O1xufVxuLy8gLmZvcm0tZ3JvdXAge1xuLy8gICAgIGJhY2tncm91bmQtY29sb3I6IHJlZDtcbi8vIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["FormControl","FormGroup","Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ctx_r0","alertColor","ɵɵadvance","ɵɵtextInterpolate1","alertMsg","DiscountAddComponent","constructor","discount","users","showAlert","discount_code","required","minLength","title","description","start_date","end_date","discount_percent","max_discount_amount","max_no_of_users","addDiscount","ngOnInit","userDetails","getStoredUserDetails","addAccessTrail","email","console","log","userCredetials","login","action","addAccesstrail","subscribe","res","message","onSubmit","setTimeout","discountData","value","code","reset","_","ɵɵdirectiveInject","i1","DiscountService","i2","UsersService","_2","selectors","decls","vars","consts","template","DiscountAddComponent_Template","rf","ctx","ɵɵtemplate","DiscountAddComponent_app_vr_alert_0_Template","ɵɵelement","ɵɵlistener","DiscountAddComponent_Template_button_click_62_listener","DiscountAddComponent_Template_button_click_64_listener"],"sources":["/Users/ikoi6/codingPs/vroom/Vroom_CMS_V2/src/app/pages/discount-add/discount-add.component.ts","/Users/ikoi6/codingPs/vroom/Vroom_CMS_V2/src/app/pages/discount-add/discount-add.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup,Validators, } from '@angular/forms';\nimport { DiscountService } from 'src/app/service/discount.service';\nimport { UsersService } from 'src/app/service/users.service';\n\n@Component({\n  selector: 'app-discount-add',\n  templateUrl: './discount-add.component.html',\n  styleUrls: ['./discount-add.component.scss']\n})\nexport class DiscountAddComponent implements OnInit {\n  userDetails:any\n  \n// variables\n\nshowAlert = false;\nalertMsg = 'Please wait';\nalertColor = 'primary';\n\n// constructor and lifecycle methods\nconstructor(private discount: DiscountService, private users:UsersService){\n   }\n\nngOnInit(){\n  const userDetails = this.users.getStoredUserDetails();\n  this.userDetails = userDetails\n  this.addAccessTrail()\n}\n\n // validators & formcontrols\n discount_code = new FormControl('',[Validators.required, Validators.minLength(1)]);\n title = new FormControl('',[Validators.required, Validators.minLength(3)]);\n description = new FormControl('',[Validators.required, Validators.minLength(3)]);\n start_date = new FormControl('',[Validators.required, Validators.minLength(3)]);\n end_date = new FormControl('',[Validators.required, Validators.minLength(3)]);\n discount_percent = new FormControl('',[Validators.required, Validators.minLength(1)]);\n max_discount_amount = new FormControl('',[Validators.required, Validators.minLength(1)]);\n max_no_of_users = new FormControl('',[Validators.required, Validators.minLength(1)]);\n \n // Grouped Form\n addDiscount = new FormGroup({\n   discount_code: this.discount_code,\n   title: this.title,\n   description: this.description,\n   start_date: this.start_date,\n   end_date: this.end_date,\n   discount_percent: this.discount_percent,\n   max_discount_amount: this.max_discount_amount,\n   max_no_of_users: this.max_no_of_users\n })\n\n addAccessTrail(){\n  const {email} = this.userDetails\n  console.log(email)\n\n  const userCredetials = {\n    login: email,\n    action: 'Viewed Discount Add'\n  }\n\n  this.users.addAccesstrail(userCredetials).subscribe(\n    (res:any)=>{\n      const {message} = res\n      if(message === \"Success insering access\"){\n       } else {}\n    }\n  )\n}\n\n//  functions \nonSubmit(){\n  this.showAlert = true\n  setTimeout(() => {\n    this.showAlert = true\n    this.alertMsg = 'Loading... If sync persists check network'\n    this.alertColor = 'info'\n    const discountData = this.addDiscount.value\n    console.log(discountData)\n    this.discount.addDiscount(discountData).subscribe(\n      (res:any) => {\n       console.log(res)\n       if(res.code == 200){\n        this.alertMsg = 'Discount added';\n        this.alertColor = \"success\"\n       } else {\n        this.alertMsg = 'something went wrong check connectivity and try again';\n        this.alertColor = 'danger'\n       }\n       } \n    )\n    }, 1600)\n}\n\nreset(){\n  this.addDiscount.reset()\n}\n\n}\n","<app-vr-alert *ngIf=\"showAlert\" [color]=\"alertColor\">\n    {{ alertMsg }}\n</app-vr-alert>\n<div class=\"main-container\">\n    <div class=\"header\">\n        <div class=\"add-admin-form\">\n           <div class=\"card\">\n            <div class=\"card-title\">\n                <h5>Add Discount</h5>\n            </div>\n            <div class=\"card-body\">\n                <form [formGroup]=\"addDiscount\">\n                <div class=\"container\">\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"fistname\">Discount code*</label>\n                            </div>\n                             <app-vr-input pInputText [control]=\"discount_code\" type=\"text\" placeholder=\"Discount Code\" ></app-vr-input> \n                        </div>\n                    </div>\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"lastname\">Title*</label>\n                            </div>\n                             <app-vr-input pInputText [control]=\"title\" type=\"text\" placeholder=\"Title\"></app-vr-input> \n                        </div>\n                    </div>\n                </div>\n                <div class=\"container\">\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"email\">Description*</label>\n                            </div>\n                            <app-vr-input pInputText [control]=\"description \" type=\"text\" placeholder=\"Description\" ></app-vr-input> \n                        \n                        \n                        </div>\n                    </div>\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"phone\">Discount Percent*</label>\n                            </div>\n                            <app-vr-input pInputText pKeyFilter=\"int\" [control]=\"discount_percent\" placeholder=\"Discount Percent\"\n                              />\n                        </div>\n                    </div>\n                </div>\n                <div class=\"container\">\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"phone\">Start date*</label>\n                            </div>\n                            <app-vr-input pInputText pKeyFilter=\"int\" [control]=\"start_date\" placeholder=\" Start Date\"\n                              />\n                        \n                        </div>\n                    </div>\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"phone\">End date*</label>\n                            </div>\n                            <app-vr-input pInputText pKeyFilter=\"int\" [control]=\"end_date\" placeholder=\" End Date\"\n                              />\n                        </div>\n                    </div>\n                </div>\n                <div class=\"container\">\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"max_discount_amount\">Max Discount Amount*</label>\n                            </div>\n                            <app-vr-input pInputText pKeyFilter=\"int\" [control]=\"max_discount_amount \" placeholder=\"Max Discount Amount \"\n                            />   \n                        </div>\n                    </div>\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"max_no_of_users\">Max Number of Users*</label>\n                            </div>\n                            <app-vr-input pInputText pKeyFilter=\"int\" [control]=\"max_no_of_users\" placeholder=\"Max Number of Users\"\n                            />   \n                        </div>\n                    </div>\n                </div>\n               \n\n                <!-- <div class=\"btn\"> -->\n                    <button type=\"submit\" label=\"submit\"  class=\"button btn-primary \"\n                    (click)=\"onSubmit()\"\n                   \n                    \n                    >\n                       Add \n                    </button>\n                    <button type=\"submit\" label=\"submit\" class=\"button btn-secondary\" (click)=\"reset()\">\n                       Cancel\n                    </button>\n                <!-- </div> -->\n              </form>\n            </div>\n           </div>\n        </div>\n    </div>\n    <div class=\"footer\"></div>\n\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}