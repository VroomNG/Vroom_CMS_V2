{"ast":null,"code":"import { FormGroup, FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/notifications.service\";\nimport * as i2 from \"src/app/service/users.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"primeng/inputtext\";\nimport * as i6 from \"../../layouts/shared/vr-input/vr-input.component\";\nimport * as i7 from \"../../layouts/shared/vr-alert/vr-alert.component\";\nfunction NotifyAddComponent_app_vr_alert_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"app-vr-alert\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"color\", ctx_r0.alertColor);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.alertMsg, \"\\n\");\n  }\n}\nfunction NotifyAddComponent_option_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r4.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r4.name);\n  }\n}\nfunction NotifyAddComponent_option_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r5.name);\n  }\n}\nfunction NotifyAddComponent_option_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r6 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r6.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(option_r6.name);\n  }\n}\nexport class NotifyAddComponent {\n  constructor(NotifyService, users) {\n    this.NotifyService = NotifyService;\n    this.users = users;\n    this.options = [];\n    this.checked = false;\n    this.ischecked = false;\n    this.isChecked = false;\n    this.showAlert = false;\n    this.alertMsg = 'Sending notification, please wait...';\n    this.alertColor = 'primary';\n    // validator\n    this.title = new FormControl('', [Validators.required, Validators.minLength(0)]);\n    this.textBody = new FormControl('', [Validators.required, Validators.minLength(0)]);\n    this.sendDate = new FormControl('', [Validators.required, Validators.minLength(0)]);\n    this.riders = new FormControl('', [Validators.required, Validators.minLength(0)]);\n    this.drivers = new FormControl('', [Validators.required, Validators.minLength(0)]);\n    this.udrivers = new FormControl('', [Validators.required, Validators.minLength(0)]);\n    this.addNotify = new FormGroup({\n      title: this.title,\n      textBody: this.textBody,\n      sendDate: this.sendDate,\n      riders: this.riders,\n      drivers: this.drivers,\n      udrivers: this.udrivers\n    });\n  }\n  ngOnInit() {\n    this.options = [{\n      id: 0,\n      name: 'No'\n    }, {\n      id: 1,\n      name: 'Yes'\n    }];\n    const userDetails = this.users.getStoredUserDetails();\n    this.userDetails = userDetails;\n    this.addAccessTrail();\n  }\n  addAccessTrail() {\n    const {\n      email\n    } = this.userDetails;\n    console.log(email);\n    const userCredetials = {\n      login: email,\n      action: 'Viewed Add Notifications'\n    };\n    this.users.addAccesstrail(userCredetials).subscribe(res => {\n      const {\n        message\n      } = res;\n      if (message === \"Success insering access\") {} else {}\n    });\n  }\n  submitNotify() {\n    this.showAlert = true;\n    let addNotifyValue = this.addNotify.value;\n    // let sendDate = this.addNotify.value.sendDate\n    // const formattedDate = this.formatDateTimeForServer(sendDate);\n    console.log(addNotifyValue);\n    this.NotifyService.addNotify(addNotifyValue).subscribe(res => {\n      console.log(res);\n      if (res.code === 200) {\n        this.alertMsg = 'Notification Sent';\n        this.alertColor = 'success';\n      } else this.alertMsg = 'Failed to send Notification', this.alertColor = 'danger';\n    });\n  }\n  formatDateTimeForServer(date) {\n    const formattedDate = new Date(date.getTime() - date.getTimezoneOffset() * 60000).toISOString().slice(0, 19).replace('T', ' ');\n    return formattedDate;\n  }\n  reset() {\n    this.addNotify.reset();\n  }\n  static #_ = this.ɵfac = function NotifyAddComponent_Factory(t) {\n    return new (t || NotifyAddComponent)(i0.ɵɵdirectiveInject(i1.NotificationService), i0.ɵɵdirectiveInject(i2.UsersService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NotifyAddComponent,\n    selectors: [[\"app-notify-add\"]],\n    decls: 57,\n    vars: 8,\n    consts: [[3, \"color\", 4, \"ngIf\"], [1, \"main-container\"], [1, \"header\"], [1, \"add-admin-form\"], [1, \"card\"], [1, \"card-title\"], [1, \"card-body\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"container\"], [1, \"card-input\"], [1, \"form-group\"], [\"htmlFor\", \"title\"], [\"pInputText\", \"\", \"name\", \"title\", \"type\", \"text\", \"placeholder\", \"Title\", 3, \"control\"], [\"htmlFor\", \"textBody\"], [\"pInputText\", \"\", \"name\", \"textBody\", \"type\", \"text\", \"placeholder\", \"Description\", 3, \"control\"], [\"htmlFor\", \"date\"], [\"pInputText\", \"\", \"type\", \"datetime-local\", \"name\", \"date\", \"placeholder\", \"Date\", 3, \"control\"], [\"htmlFor\", \"riders\"], [\"id\", \"riders\", \"name\", \"riders\", \"formControlName\", \"riders\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"htmlFor\", \"phone\"], [\"id\", \"drivers\", \"name\", \"drivers\", \"formControlName\", \"drivers\"], [\"htmlFor\", \"password\"], [\"id\", \"udrivers\", \"name\", \"udrivers\", \"formControlName\", \"udrivers\"], [\"type\", \"submit\", \"label\", \"submit\", 1, \"button\", \"btn-primary\", \"my-4\", 3, \"click\"], [\"type\", \"submit\", \"label\", \"submit\", 1, \"button\", 3, \"click\"], [1, \"footer\"], [3, \"color\"], [3, \"value\"]],\n    template: function NotifyAddComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, NotifyAddComponent_app_vr_alert_0_Template, 2, 2, \"app-vr-alert\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"div\", 5)(6, \"h5\");\n        i0.ɵɵtext(7, \"Add Notifications \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(8, \"div\", 6)(9, \"form\", 7);\n        i0.ɵɵlistener(\"ngSubmit\", function NotifyAddComponent_Template_form_ngSubmit_9_listener() {\n          return ctx.submitNotify();\n        });\n        i0.ɵɵelementStart(10, \"div\", 8)(11, \"div\", 9)(12, \"div\", 10)(13, \"div\")(14, \"label\", 11);\n        i0.ɵɵtext(15, \"Title*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(16, \"app-vr-input\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(17, \"div\", 9)(18, \"div\", 10)(19, \"div\")(20, \"label\", 13);\n        i0.ɵɵtext(21, \"Description*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(22, \"app-vr-input\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(23, \"div\", 8)(24, \"div\", 9)(25, \"div\", 10)(26, \"div\")(27, \"label\", 15);\n        i0.ɵɵtext(28, \"Date*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(29, \"app-vr-input\", 16);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(30, \"div\", 9)(31, \"div\", 10)(32, \"div\")(33, \"label\", 17);\n        i0.ɵɵtext(34, \"Riders*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(35, \"select\", 18);\n        i0.ɵɵtemplate(36, NotifyAddComponent_option_36_Template, 2, 2, \"option\", 19);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(37, \"div\", 8)(38, \"div\", 9)(39, \"div\", 10)(40, \"div\")(41, \"label\", 20);\n        i0.ɵɵtext(42, \"Drivers*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(43, \"select\", 21);\n        i0.ɵɵtemplate(44, NotifyAddComponent_option_44_Template, 2, 2, \"option\", 19);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(45, \"div\", 9)(46, \"div\", 10)(47, \"div\")(48, \"label\", 22);\n        i0.ɵɵtext(49, \"UnApproved Drivers*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(50, \"select\", 23);\n        i0.ɵɵtemplate(51, NotifyAddComponent_option_51_Template, 2, 2, \"option\", 19);\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(52, \"button\", 24);\n        i0.ɵɵlistener(\"click\", function NotifyAddComponent_Template_button_click_52_listener() {\n          return ctx.submitNotify();\n        });\n        i0.ɵɵtext(53, \" Add \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"button\", 25);\n        i0.ɵɵlistener(\"click\", function NotifyAddComponent_Template_button_click_54_listener() {\n          return ctx.reset();\n        });\n        i0.ɵɵtext(55, \" Cancel \");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelement(56, \"div\", 26);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.showAlert);\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"formGroup\", ctx.addNotify);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"control\", ctx.title);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"control\", ctx.textBody);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"control\", ctx.sendDate);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.options);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", ctx.options);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.options);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.FormGroupDirective, i4.FormControlName, i5.InputText, i6.VRInputComponent, i7.VrAlertComponent],\n    styles: [\".main-container[_ngcontent-%COMP%] {\\n  height: 100vh;\\n  width: 100%;\\n}\\n\\n.header[_ngcontent-%COMP%] {\\n  height: 30%;\\n  background: rgb(2, 0, 36);\\n  background: linear-gradient(90deg, rgb(2, 0, 36) 0%, rgba(9, 9, 121, 0.6755077031) 35%, rgb(0, 212, 255) 100%);\\n}\\n\\n.footer[_ngcontent-%COMP%] {\\n  height: 70%;\\n  background-color: #F3F5FB;\\n}\\n\\n.add-admin-form[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  width: 100%;\\n  height: 100vh;\\n  background-color: transparent;\\n  position: absolute;\\n}\\n\\n.card[_ngcontent-%COMP%] {\\n  width: 90%;\\n  height: 90%;\\n  padding: 40px;\\n}\\n\\n.container[_ngcontent-%COMP%] {\\n  display: flex;\\n  width: 100%;\\n  height: 100%;\\n}\\n\\n.card-input[_ngcontent-%COMP%] {\\n  width: 50%;\\n  height: 16vh;\\n}\\n\\nlabel[_ngcontent-%COMP%] {\\n  color: rgb(199, 197, 197);\\n  font-weight: 600;\\n}\\n\\ninput[_ngcontent-%COMP%] {\\n  width: 95%;\\n  padding: 10px 10px;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n  width: 50%;\\n  height: 100%;\\n}\\n\\nbutton[_ngcontent-%COMP%] {\\n  padding: 10px;\\n  width: 10%;\\n  border-radius: 10px;\\n  margin: 10px;\\n  background-color: #219cdb;\\n  color: white;\\n  font-weight: 600;\\n  border-color: transparent;\\n}\\n\\n.button[_ngcontent-%COMP%] {\\n  padding: 10px;\\n  width: 12%;\\n  border-radius: 10px;\\n  margin: 10px;\\n  background-color: #525252;\\n  color: white;\\n  font-weight: 600;\\n  border-color: transparent;\\n}\\n\\n.dropdown[_ngcontent-%COMP%] {\\n  width: 95%;\\n  height: 100%;\\n}\\n\\nlabel[_ngcontent-%COMP%] {\\n  color: rgb(4, 4, 51);\\n}\\n\\nselect[_ngcontent-%COMP%] {\\n  width: 95%;\\n  padding: 8.5px;\\n  border-radius: 6px;\\n  border: 1px solid #d6d6d6;\\n  color: #797676;\\n}\\n\\nselect[_ngcontent-%COMP%]:hover {\\n  color: rgb(20, 20, 20);\\n}\\n\\nselect.selected[_ngcontent-%COMP%] {\\n  border: 1px solid #d6d6d6 !important;\\n}\\n\\n.admin_role[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbm90aWZ5LWFkZC9ub3RpZnktYWRkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksYUFBQTtFQUNBLFdBQUE7QUFDSjs7QUFDQTtFQUNJLFdBQUE7RUFDQSx5QkFBQTtFQUNBLDhHQUFBO0FBRUo7O0FBQ0E7RUFDSSxXQUFBO0VBQ0EseUJBQUE7QUFFSjs7QUFDQTtFQUNJLGFBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7RUFDQSw2QkFBQTtFQUNBLGtCQUFBO0FBRUo7O0FBQ0E7RUFDSSxVQUFBO0VBQ0EsV0FBQTtFQUNBLGFBQUE7QUFFSjs7QUFDQTtFQUNJLGFBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtBQUVKOztBQUNBO0VBQ0ksVUFBQTtFQUNBLFlBQUE7QUFFSjs7QUFBQTtFQUNJLHlCQUFBO0VBQ0EsZ0JBQUE7QUFHSjs7QUFEQTtFQUNJLFVBQUE7RUFFQSxrQkFBQTtBQUdKOztBQUFBO0VBQ0csVUFBQTtFQUNBLFlBQUE7QUFHSDs7QUFEQTtFQUNJLGFBQUE7RUFDQSxVQUFBO0VBQ0EsbUJBQUE7RUFDQSxZQUFBO0VBQ0EseUJBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7RUFDQSx5QkFBQTtBQUlKOztBQUZBO0VBQ0ksYUFBQTtFQUNBLFVBQUE7RUFDQSxtQkFBQTtFQUNBLFlBQUE7RUFDQSx5QkFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtFQUNBLHlCQUFBO0FBS0o7O0FBRkE7RUFDSSxVQUFBO0VBQ0EsWUFBQTtBQUtKOztBQURBO0VBQ0ksb0JBQUE7QUFJSjs7QUFEQTtFQUNJLFVBQUE7RUFDQSxjQUFBO0VBQ0Esa0JBQUE7RUFDQSx5QkFBQTtFQUNBLGNBQUE7QUFJSjs7QUFEQTtFQUNJLHNCQUFBO0FBSUo7O0FBREE7RUFDSSxvQ0FBQTtBQUlKOztBQURBO0VBQ0ksZUFBQTtBQUlKIiwic291cmNlc0NvbnRlbnQiOlsiLm1haW4tY29udGFpbmVyIHtcbiAgICBoZWlnaHQ6IDEwMHZoO1xuICAgIHdpZHRoOiAxMDAlO1xufVxuLmhlYWRlciB7XG4gICAgaGVpZ2h0OiAzMCU7XG4gICAgYmFja2dyb3VuZDogcmdiKDIsMCwzNik7XG4gICAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCByZ2JhKDIsMCwzNiwxKSAwJSwgcmdiYSg5LDksMTIxLDAuNjc1NTA3NzAzMDgxMjMyNCkgMzUlLCByZ2JhKDAsMjEyLDI1NSwxKSAxMDAlKTtcbn1cblxuLmZvb3RlciB7XG4gICAgaGVpZ2h0OiA3MCU7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI0YzRjVGQjtcbn1cblxuLmFkZC1hZG1pbi1mb3JtIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDB2aDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG59XG5cbi5jYXJkIHtcbiAgICB3aWR0aDogOTAlO1xuICAgIGhlaWdodDogOTAlO1xuICAgIHBhZGRpbmc6IDQwcHg7XG59XG5cbi5jb250YWluZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIC8vIGJhY2tncm91bmQtY29sb3I6IG9yYW5nZTtcbn1cbi5jYXJkLWlucHV0IHtcbiAgICB3aWR0aDogNTAlO1xuICAgIGhlaWdodDogMTZ2aDtcbn1cbmxhYmVsIHtcbiAgICBjb2xvcjogcmdiKDE5OSwgMTk3LCAxOTcpO1xuICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG59XG5pbnB1dCB7XG4gICAgd2lkdGg6IDk1JTtcbiAgICAvLyBoZWlnaHQ6IDMwcHg7XG4gICAgcGFkZGluZzogMTBweCAxMHB4O1xuXG59XG4uYnRuIHtcbiAgIHdpZHRoOiA1MCU7XG4gICBoZWlnaHQ6IDEwMCU7XG59XG5idXR0b24ge1xuICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgd2lkdGg6IDEwJTtcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgIG1hcmdpbjogMTBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMjE5Y2RiO1xuICAgIGNvbG9yOiB3aGl0ZTtcbiAgICBmb250LXdlaWdodDogNjAwO1xuICAgIGJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XG59XG4uYnV0dG9uIHtcbiAgICBwYWRkaW5nOiAxMHB4O1xuICAgIHdpZHRoOiAxMiU7XG4gICAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgICBtYXJnaW46IDEwcHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzUyNTI1MjtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1xufVxuXG4uZHJvcGRvd24ge1xuICAgIHdpZHRoOiA5NSU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIC8vIHBhZGRpbmc6IDEwcHg7XG59XG5cbmxhYmVsIHtcbiAgICBjb2xvcjogcmdiKDQsIDQsIDUxKTtcbn1cblxuc2VsZWN0IHtcbiAgICB3aWR0aDogOTUlO1xuICAgIHBhZGRpbmc6IDguNXB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZDZkNmQ2O1xuICAgIGNvbG9yOiAjNzk3Njc2O1xufVxuXG5zZWxlY3Q6aG92ZXIge1xuICAgIGNvbG9yOiByZ2IoMjAsIDIwLCAyMCk7XG59XG5cbnNlbGVjdC5zZWxlY3RlZCB7XG4gICAgYm9yZGVyOiAxcHggc29saWQgI2Q2ZDZkNiAhaW1wb3J0YW50O1xufVxuXG4uYWRtaW5fcm9sZSBsaSB7XG4gICAgZm9udC1zaXplOiAxMnB4O1xufVxuLy8gLmZvcm0tZ3JvdXAge1xuLy8gICAgIGJhY2tncm91bmQtY29sb3I6IHJlZDtcbi8vIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["FormGroup","FormControl","Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ctx_r0","alertColor","ɵɵadvance","ɵɵtextInterpolate1","alertMsg","option_r4","id","ɵɵtextInterpolate","name","option_r5","option_r6","NotifyAddComponent","constructor","NotifyService","users","options","checked","ischecked","isChecked","showAlert","title","required","minLength","textBody","sendDate","riders","drivers","udrivers","addNotify","ngOnInit","userDetails","getStoredUserDetails","addAccessTrail","email","console","log","userCredetials","login","action","addAccesstrail","subscribe","res","message","submitNotify","addNotifyValue","value","code","formatDateTimeForServer","date","formattedDate","Date","getTime","getTimezoneOffset","toISOString","slice","replace","reset","_","ɵɵdirectiveInject","i1","NotificationService","i2","UsersService","_2","selectors","decls","vars","consts","template","NotifyAddComponent_Template","rf","ctx","ɵɵtemplate","NotifyAddComponent_app_vr_alert_0_Template","ɵɵlistener","NotifyAddComponent_Template_form_ngSubmit_9_listener","ɵɵelement","NotifyAddComponent_option_36_Template","NotifyAddComponent_option_44_Template","NotifyAddComponent_option_51_Template","NotifyAddComponent_Template_button_click_52_listener","NotifyAddComponent_Template_button_click_54_listener"],"sources":["/Users/ikoi6/codingPs/vroom/Vroom_CMS_V2/src/app/pages/notify-add/notify-add.component.ts","/Users/ikoi6/codingPs/vroom/Vroom_CMS_V2/src/app/pages/notify-add/notify-add.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { NotificationService } from 'src/app/service/notifications.service';\nimport { UsersService } from 'src/app/service/users.service';\n\ninterface Option {\n  id:number,\n  name: string,\n}\n\n@Component({\n  selector: 'app-notify-add',\n  templateUrl: './notify-add.component.html',\n  styleUrls: ['./notify-add.component.scss']\n})\nexport class NotifyAddComponent implements OnInit {\n\n  options: Option[] = [];\n  userDetails:any\n\n  checked: boolean = false;\n  ischecked: boolean = false;\n  isChecked: boolean = false;\n\n  showAlert = false;\n  alertMsg = 'Sending notification, please wait...';\n  alertColor = 'primary';\n  \n  constructor(private NotifyService: NotificationService, private users:UsersService){ }\n\n  ngOnInit(){\n     this.options = [\n      {id:0, name:'No'},\n      {id:1, name:'Yes'}\n    ]\n    const userDetails = this.users.getStoredUserDetails();\n    this.userDetails = userDetails\n    this.addAccessTrail()\n\n   }\n\n  // validator\n  \n  title = new FormControl('', [Validators.required, Validators.minLength(0)]);\n  textBody = new FormControl('', [Validators.required, Validators.minLength(0)]);\n  sendDate = new FormControl('', [Validators.required, Validators.minLength(0)]);\n  riders = new FormControl('', [Validators.required, Validators.minLength(0)]);\n  drivers = new FormControl('', [Validators.required, Validators.minLength(0)]);\n  udrivers = new FormControl('', [Validators.required, Validators.minLength(0)]);\n\n  addNotify = new FormGroup({\n    title: this.title,\n    textBody: this.textBody,\n    sendDate: this.sendDate,\n    riders: this.riders,\n    drivers: this.drivers,\n    udrivers: this.udrivers\n  })\n\n  addAccessTrail(){\n    const {email} = this.userDetails\n    console.log(email)\n  \n    const userCredetials = {\n      login: email,\n      action: 'Viewed Add Notifications'\n    }\n  \n    this.users.addAccesstrail(userCredetials).subscribe(\n      (res:any)=>{\n        const {message} = res\n        if(message === \"Success insering access\"){\n         } else {}\n      }\n    )\n  }\n\n  submitNotify(){\n    this.showAlert = true;\n    let addNotifyValue = this.addNotify.value\n    // let sendDate = this.addNotify.value.sendDate\n    // const formattedDate = this.formatDateTimeForServer(sendDate);\n    console.log(addNotifyValue);\n    this.NotifyService.addNotify(addNotifyValue).subscribe(\n      (res:any)=> {\n        console.log(res)\n\n        if(res.code === 200) {\n            this.alertMsg = 'Notification Sent'\n            this.alertColor = 'success' \n        } else(\n          this.alertMsg = 'Failed to send Notification',\n          this.alertColor = 'danger'\n        )\n      }\n    )\n  }\n\n  formatDateTimeForServer(date: any): string {\n    const formattedDate = new Date(date.getTime() - date.getTimezoneOffset() * 60000)\n      .toISOString()\n      .slice(0, 19)\n      .replace('T', ' ');\n    return formattedDate;\n  }\n  reset( ){\n    this.addNotify.reset()\n  }\n\n}","<app-vr-alert *ngIf=\"showAlert\" [color]=\"alertColor\">\n    {{ alertMsg }}\n</app-vr-alert>\n<div class=\"main-container\">\n    <div class=\"header\">\n        <div class=\"add-admin-form\">\n           <div class=\"card\">\n            <div class=\"card-title\">\n                <h5>Add  Notifications  </h5>\n            </div>\n        <div class=\"card-body\">\n            <form [formGroup]=\"addNotify\" (ngSubmit)=\"submitNotify()\">\n                <div class=\"container\">\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"title\">Title*</label>\n                            </div>\n                             <app-vr-input pInputText [control]=\"title\" name=\"title\" type=\"text\" placeholder=\"Title\" ></app-vr-input> \n                        </div>\n                    </div>\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"textBody\">Description*</label>\n                            </div>\n                             <app-vr-input pInputText [control]=\"textBody\" name=\"textBody\" type=\"text\" placeholder=\"Description\"></app-vr-input> \n                        </div>\n                    </div>\n                </div>\n                <div class=\"container\">\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"date\">Date*</label>\n                            </div>\n                            <app-vr-input pInputText type=\"datetime-local\" [control]=\"sendDate\" name=\"date\" placeholder=\"Date\" />\n                        </div>\n                    </div>\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"riders\">Riders*</label>\n                            </div>\n                            <select id=\"riders\" name=\"riders\" formControlName=\"riders\">\n                                <option *ngFor=\"let option of options\" [value]=\"option.id\" >{{ option.name }}</option>\n                            </select>\n                        </div>\n                    </div>\n                    \n                </div>\n                <div class=\"container\">\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"phone\">Drivers*</label>\n                            </div>\n                            <select id=\"drivers\" name=\"drivers\" formControlName=\"drivers\">\n                                <option *ngFor=\"let option of options\" [value]=\"option.id\">{{ option.name }}</option>\n                            </select>\n                        </div>\n                    </div>\n                    <div class=\"card-input\">\n                        <div class=\"form-group\">\n                            <div>\n                                <label htmlFor=\"password\">UnApproved Drivers*</label>\n                            </div>\n                            <select id=\"udrivers\" name=\"udrivers\" formControlName=\"udrivers\">\n                                <option *ngFor=\"let option of options\" [value]=\"option.id\">{{ option.name }}</option>\n                            </select>\n                        </div>\n                    </div>\n                </div>\n              \n\n                <!-- <div class=\"btn\"> -->\n                    <button type=\"submit\" label=\"submit\"  class=\"button btn-primary my-4\"\n                    (click)=\"submitNotify()\"\n  \n                    >\n                       Add \n                    </button>\n                    <button type=\"submit\" label=\"submit\" class=\"button\" (click)=\"reset()\">\n                       Cancel\n                    </button>\n                <!-- </div> -->\n              </form>\n            </div>\n           </div>\n        </div>\n    </div>\n    <div class=\"footer\"></div>\n\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}